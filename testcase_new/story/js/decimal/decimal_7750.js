/************************************
*@Description: decimal data use $inc
*@author:      zhaoyu
*@createdate:  2016.4.29
**************************************/
main( test )
function test ()
{
   var clName = COMMCLNAME + "_7750";
   //clean environment before test
   commDropCL( db, COMMCSNAME, clName );

   //1.inc int data
   var dbcl = commCreateCL( db, COMMCSNAME, clName );

   //insert decimal data 
   var doc1 = [{ a: { $decimal: "-92233720368547758081024" } },
   { a: { $decimal: "9223372036854775807", $precision: [1000, 2] } },
   { a: { $decimal: "-1.7E+308" } },
   { a: { $decimal: "1.7E+308", $precision: [1000, 2] } },
   { a: { $decimal: "-4.94E-350" } },
   { a: { $decimal: "5.78E-330", $precision: [1000, 340] } },
   { a: { $decimal: "15", $precision: [10, 3] } },
   { a: { $decimal: "-15" } },
   { a: { $decimal: "0", $precision: [1000, 2] } },
   { a: { $decimal: "8.79", $precision: [10, 3] } },
   { a: { $decimal: "-1.56" } },
   { a: { $decimal: "0" } },
   { a: 123 }];
   dbcl.insert( doc1 );

   //update use $inc,then check
   var updateCondition1 = { $inc: { a: -2147483648 } };
   dbcl.update( updateCondition1 );

   //check result
   var expRecs1 = [{ a: { $decimal: "-92233720368549905564672" } },
   { a: { $decimal: "9223372034707292159.00", $precision: [1000, 2] } },
   { a: { $decimal: "-170000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002147483648" } },
   { a: { $decimal: "169999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999997852516352.00", $precision: [1000, 2] } },
   { a: { $decimal: "-2147483648.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000494" } },
   { a: { $decimal: "-2147483647.9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999942200000000", $precision: [1000, 340] } },
   { a: { $decimal: "-2147483633.000" } }, //lose argument precision {$decimal:"-2147483633.000",$precision:[10,3]}
   { a: { $decimal: "-2147483663" } },
   { a: { $decimal: "-2147483648.00", $precision: [1000, 2] } },
   { a: { $decimal: "-2147483639.210" } },////lose argument precision{$decimal:"-2147483639.210",$precision:[10,3]}
   { a: { $decimal: "-2147483649.56" } },
   { a: { $decimal: "-2147483648" } },
   { a: -2147483525 }];
   checkResult( dbcl, null, null, expRecs1, { _id: 1 } );

   //2.inc decimal data
   dbcl.remove();

   //insert decimal data 
   var doc2 = [{ a: { $decimal: "-92233720368547758081024" } },
   { a: { $decimal: "9223372036854775807", $precision: [1000, 2] } },
   { a: { $decimal: "-1.7E+308" } },
   { a: { $decimal: "1.7E+308", $precision: [1000, 2] } },
   { a: { $decimal: "-4.94E-350" } },
   { a: { $decimal: "5.78E-330", $precision: [1000, 340] } },
   { a: { $decimal: "15", $precision: [10, 3] } },
   { a: { $decimal: "-15" } },
   { a: { $decimal: "0", $precision: [1000, 2] } },
   { a: { $decimal: "8.79", $precision: [10, 3] } },
   { a: { $decimal: "-1.56" } },
   { a: { $decimal: "0" } }];
   dbcl.insert( doc2 );

   //update use $inc,then check
   var updateCondition2 = { $inc: { a: { $decimal: "-1.7E+308" } } };
   dbcl.update( updateCondition2 );;

   //check result
   var expRecs2 = [{ a: { $decimal: "-170000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000092233720368547758081024" } },
   { a: { $decimal: "-169999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999990776627963145224193.00", $precision: [1000, 2] } },
   { a: { $decimal: "-340000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000" } },
   { a: { $decimal: "0.00", $precision: [1000, 2] } },
   { a: { $decimal: "-170000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000494" } },
   { a: { $decimal: "-169999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999.9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999942200000000", $precision: [1000, 340] } },
   { a: { $decimal: "-169999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999985.000" } },
   { a: { $decimal: "-170000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000015" } },
   { a: { $decimal: "-170000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000.00", $precision: [1000, 2] } },
   { a: { $decimal: "-169999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999991.210" } },
   { a: { $decimal: "-170000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001.56" } },
   { a: { $decimal: "-170000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000" } }];
   checkResult( dbcl, null, null, expRecs2, { _id: 1 } );

   //3.inc decimal data with precision
   dbcl.remove();

   //insert decimal data 
   var doc3 = [{ a: { $decimal: "-92233720368547758081024" } },
   { a: { $decimal: "92233720368547758072018", $precision: [1000, 2] } },
   { a: { $decimal: "-1.7E+308" } },
   { a: { $decimal: "1.7E+308", $precision: [1000, 2] } },
   { a: { $decimal: "-4.94E-350" } },
   { a: { $decimal: "5.78E-330", $precision: [1000, 340] } },
   { a: { $decimal: "15", $precision: [10, 3] } },
   { a: { $decimal: "-15" } },
   { a: { $decimal: "0", $precision: [1000, 2] } },
   { a: { $decimal: "8.79", $precision: [10, 3] } },
   { a: { $decimal: "-1.56" } },
   { a: { $decimal: "0" } },
   { a: 123 }];
   dbcl.insert( doc3 );

   //update use $inc,then check
   var updateCondition2 = { $inc: { a: { $decimal: "5.9E-330", $precision: [1000, 331] } } };
   dbcl.update( updateCondition2 );;

   //check result
   var expRecs2 = [{ a: { $decimal: "-92233720368547758081023.9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999941" } },
   { a: { $decimal: "92233720368547758072018.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000059" } },
   { a: { $decimal: "-169999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999.9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999941" } },
   { a: { $decimal: "170000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000059" } },//,$precision:[1000,2]
   { a: { $decimal: "0.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000058999999999999999999506" } },
   { a: { $decimal: "0.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000116800000000", $precision: [1000, 340] } },
   { a: { $decimal: "15.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000059" } },
   { a: { $decimal: "-14.9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999941" } },
   { a: { $decimal: "0.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000059" } },
   { a: { $decimal: "8.7900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000059" } },
   { a: { $decimal: "-1.5599999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999941" } },
   { a: { $decimal: "0.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000059" } },
   { a: { $decimal: "123.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000059" } }];
   checkResult( dbcl, null, null, expRecs2, { _id: 1 } );
   commDropCL( db, COMMCSNAME, clName );
}

