/************************************
*@Description: decimal data use sort
*@author:      zhaoyu
*@createdate:  2016.4.29
**************************************/
main( test )
function test ()
{
   var clName = COMMCLNAME + "_7752";
   //clean environment before test
   commDropCL( db, COMMCSNAME, clName );

   //create cl
   var dbcl = commCreateCL( db, COMMCSNAME, clName );

   //insert decimal data
   var doc = [{ a: { $decimal: "-9223372036854775809122", $precision: [100, 2] }, b: { $decimal: "-9223372036854775809589" } },
   { a: { $decimal: "1.7E+308" }, b: { $decimal: "-1.7E+308" } },
   { a: { $decimal: "-4.94E-325" }, b: { $decimal: "-4.94E-325", $precision: [1000, 350] } },
   { a: { $decimal: "5.94E-326" }, b: { $decimal: "0" } },
   { a: { $decimal: "-4.94E-325" }, b: 8566 },
   { a: { $decimal: "-4.94E-325" }, b: { $decimal: "-4.94E-325" } },
   { a: { $decimal: "-4.94E-325" }, b: 0 },
   { a: { $decimal: "-4.94E-325" }, b: { $numberLong: "2147483647" } },
   { a: { $decimal: "-4.94E-325" }, b: { $decimal: "2147483647" } },
   { a: { $decimal: "-4.94E-325" }, b: "abc" },
   { a: { $decimal: "0" }, b: "abc" },
   { a: { $decimal: "-9223372036854775809123" }, b: { $decimal: "-4.94E-325" } },
   { a: { $decimal: "1.71E+308", $precision: [1000, 2] }, b: { $decimal: "2147483647" } }];
   dbcl.insert( doc );

   //sort and check result
   condition = { $sort: { a: -1, b: 1 } };
   var expRecs = [{ a: { $decimal: "171000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000.00", $precision: [1000, 2] }, b: { $decimal: "2147483647" } },
   { a: { $decimal: "170000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000" }, b: { $decimal: "-170000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000" } },
   { a: { $decimal: "0.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000594" }, b: { $decimal: "0" } },
   { a: { $decimal: "0" }, b: "abc" },
   { a: { $decimal: "-0.000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000494" }, b: { $decimal: "-0.00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000049400000000000000000000000", $precision: [1000, 350] } },
   { a: { $decimal: "-0.000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000494" }, b: { $decimal: "-0.000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000494" } },
   { a: { $decimal: "-0.000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000494" }, b: 0 },
   { a: { $decimal: "-0.000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000494" }, b: 8566 },
   { a: { $decimal: "-0.000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000494" }, b: 2147483647 },
   { a: { $decimal: "-0.000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000494" }, b: { $decimal: "2147483647" } },
   { a: { $decimal: "-0.000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000494" }, b: "abc" },
   { a: { $decimal: "-9223372036854775809122.00", $precision: [100, 2] }, b: { $decimal: "-9223372036854775809589" } },
   { a: { $decimal: "-9223372036854775809123" }, b: { $decimal: "-0.000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000494" } }];
   aggregateCheckResult( dbcl, condition, expRecs );
   commDropCL( db, COMMCSNAME, clName );
}

