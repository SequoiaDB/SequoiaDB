/************************************
*@Description: argument max scale check for {$decimal:"xxx",$precision:[xx,xx]}
*@author:      zhaoyu
*@createdate:  2016.5.4
**************************************/
main( test )
function test ()
{
   var clName = COMMCLNAME + "_7792";
   //clean environment before test
   commDropCL( db, COMMCSNAME, clName );

   //create cl
   var dbcl = commCreateCL( db, COMMCSNAME, clName );

   //insert data
   var doc = [{ a: { $decimal: "9223372036854775807198410", $precision: [1000, 0] } },
   { a: { $decimal: "2", $precision: [1000, 999] } }];
   dbcl.insert( doc );

   //valid argument check
   var expRecs = [{ a: { $decimal: "9223372036854775807198410", $precision: [1000, 0] } },
   { a: { $decimal: "2.000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000", $precision: [1000, 999] } }];

   checkResult( dbcl, {}, {}, expRecs, { _id: 1 } );

   //invalid argument check
   var invalidDoc1 = { a: { $decimal: "2", $precision: [1000, 1000] } };
   invalidDataInsertCheckResult( dbcl, invalidDoc1, -6 );

   var invalidDoc2 = { a: { $decimal: "2", $precision: [2, "a"] } };
   invalidDataInsertCheckResult( dbcl, invalidDoc2, -6 );

   var invalidDoc3 = { a: { $decimal: "2", $precision: [2, -1] } };
   invalidDataInsertCheckResult( dbcl, invalidDoc3, -6 );

   var invalidDoc4 = { a: { $decimal: "2", $precision: [2, 1.2] } };
   invalidDataInsertCheckResult( dbcl, invalidDoc4, -6 );
   commDropCL( db, COMMCSNAME, clName );
}

