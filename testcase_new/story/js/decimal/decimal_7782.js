/************************************
*@Description: decimal data use sql(%)
*@author:      zhaoyu
*@createdate:  2016.5.6
**************************************/
main( test )
function test ()
{
   var clName = COMMCLNAME + "_7782";
   //clean environment before test
   commDropCL( db, COMMCSNAME, clName );

   //create cl
   var dbcl = commCreateCL( db, COMMCSNAME, clName );

   //insert decimal data
   var doc = [{ a: { $decimal: "-9223372036854775808456", $precision: [1000, 2] } },
   { a: { $decimal: "9223372036854775807123" } },
   { a: { $decimal: "-1.71E-309" } },
   { a: { $decimal: "1.72E-310", $precision: [1000, 320] } },
   { a: "123" }];
   dbcl.insert( doc );

   //mod pos int,check result
   var expRecModPosInt = [{ a: { $decimal: "-2456.00" } },
   { a: { $decimal: "1123" } },
   { a: { $decimal: "-0.00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000171" } },
   { a: { $decimal: "0.00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000017200000000" } },
   { a: null }];
   var commandModPosInt = "select a%(2147483647) from " + COMMCSNAME + "." + clName;
   checkSqlResult( db, commandModPosInt, expRecModPosInt );

   //mod neg int,check result
   var expRecsModNegInt = [{ a: { $decimal: "-456.00" } },
   { a: { $decimal: "2147482771" } },
   { a: { $decimal: "-0.00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000171" } },
   { a: { $decimal: "0.00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000017200000000" } },
   { a: null }];
   var commandModNegInt = "select a%-2147483648 from " + COMMCSNAME + "." + clName;
   checkSqlResult( db, commandModNegInt, expRecsModNegInt );

   //mod neg float,check result
   var expRecsModNegFloat = [{ a: { $decimal: "-0.70" } },
   { a: { $decimal: "0.5" } },
   { a: { $decimal: "-0.00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000171" } },
   { a: { $decimal: "0.00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000017200000000" } },
   { a: null }];
   var commandModNegFloat = "select a%-4.9 from " + COMMCSNAME + "." + clName;
   checkSqlResult( db, commandModNegFloat, expRecsModNegFloat );

   //mod pos float,check result
   var expRecsModPosFloat = [{ a: { $decimal: "-0.70" } },
   { a: { $decimal: "0.5" } },
   { a: { $decimal: "-0.00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000171" } },
   { a: { $decimal: "0.00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000017200000000" } },
   { a: null }];
   var commandModPosFloat = "select a%4.9 from " + COMMCSNAME + "." + clName;
   checkSqlResult( db, commandModPosFloat, expRecsModPosFloat );
   commDropCL( db, COMMCSNAME, clName );
}

