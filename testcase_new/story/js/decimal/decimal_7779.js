/************************************
*@Description: decimal data use sql(+)
*@author:      zhaoyu  
*@createdate:  2016.5.5
**************************************/
main( test )
function test ()
{
   var clName = COMMCLNAME + "_7779";
   //clean environment before test
   commDropCL( db, COMMCSNAME, clName );

   //create cl
   var dbcl = commCreateCL( db, COMMCSNAME, clName );

   //insert data
   var doc = [{ a: { $decimal: "-5.94E-309" } },
   { a: { $decimal: "6.94E-308" } },
   { a: { $decimal: "-1.99E+310" } },
   { a: { $decimal: "2.99E+309" } },
   { a: { $decimal: "1589.64" } },
   { a: { $decimal: "-5.94E-309" } },
   { a: { $decimal: "2147483647" } },
   { a: { $decimal: "-2147483648" } },
   { a: { $decimal: "-8958574756.57", $precision: [20, 2] } },
   { a: { $decimal: "8958574756.59", $precision: [20, 2] } },
   { a: "string" }];
   dbcl.insert( doc );

   //sub neg int,check result            	 
   var expRecsSubNegInt = [{ a: { $decimal: "2147483647.99999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999406" } },
   { a: { $decimal: "2147483648.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000694" } },
   { a: { $decimal: "-19899999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999997852516352" } },
   { a: { $decimal: "2990000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002147483648" } },
   { a: { $decimal: "2147485237.64" } },
   { a: { $decimal: "2147483647.99999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999406" } },
   { a: { $decimal: "4294967295" } },
   { a: { $decimal: "0" } },
   { a: { $decimal: "-6811091108.57" } },
   { a: { $decimal: "11106058404.59" } },
   { a: null }];
   var commandSubNegInt = "select a-(-2147483648) from " + COMMCSNAME + "." + clName;
   checkSqlResult( db, commandSubNegInt, expRecsSubNegInt );

   //sub pos int,check result
   var expRecsSubPosInt = [{ a: { $decimal: "-2147483647.00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000594" } },
   { a: { $decimal: "-2147483646.9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999306" } },
   { a: { $decimal: "-19900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002147483647" } },
   { a: { $decimal: "2989999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999997852516353" } },
   { a: { $decimal: "-2147482057.36" } },
   { a: { $decimal: "-2147483647.00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000594" } },
   { a: { $decimal: "0" } },
   { a: { $decimal: "-4294967295" } },
   { a: { $decimal: "-11106058403.57" } },
   { a: { $decimal: "6811091109.59" } },
   { a: null }];
   var commandSubPosInt = "select a-2147483647 from " + COMMCSNAME + "." + clName;
   checkSqlResult( db, commandSubPosInt, expRecsSubPosInt );

   //sub neg float,check result
   var expRecsSubPosFloat = [{ a: { $decimal: "-2147483646.99000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000594" } },
   { a: { $decimal: "-2147483646.9899999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999306" } },
   { a: { $decimal: "-19900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002147483646.99" } },
   { a: { $decimal: "2989999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999997852516353.01" } },
   { a: { $decimal: "-2147482057.35" } },
   { a: { $decimal: "-2147483646.99000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000594" } },
   { a: { $decimal: "0.01" } },
   { a: { $decimal: "-4294967294.99" } },
   { a: { $decimal: "-11106058403.56" } },
   { a: { $decimal: "6811091109.60" } },
   { a: null }];
   var commandSubPosFloat = "select a-2147483646.99 from " + COMMCSNAME + "." + clName;
   checkSqlResult( db, commandSubPosFloat, expRecsSubPosFloat );

   //sub pos float,check result
   var expRecsSubNegFloat = [{ a: { $decimal: "2147483647.98999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999406" } },
   { a: { $decimal: "2147483647.9900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000694" } },
   { a: { $decimal: "-19899999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999997852516352.01" } },
   { a: { $decimal: "2990000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002147483647.99" } },
   { a: { $decimal: "2147485237.63" } },
   { a: { $decimal: "2147483647.98999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999406" } },
   { a: { $decimal: "4294967294.99" } },
   { a: { $decimal: "-0.01" } },
   { a: { $decimal: "-6811091108.58" } },
   { a: { $decimal: "11106058404.58" } },
   { a: null }];
   var commandSubNegFloat = "select a-(-2147483647.99) from " + COMMCSNAME + "." + clName;
   checkSqlResult( db, commandSubNegFloat, expRecsSubNegFloat );
   commDropCL( db, COMMCSNAME, clName );
}

